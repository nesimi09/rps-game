<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock Paper Scissors Event</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- User Display - Top Left Corner -->
  <div id="userDisplay" class="user-display" style="display: none;">
    <span class="user-display-label">Playing as:</span>
    <span id="userDisplayName" class="user-display-name"></span>
  </div>

  <div class="container">
    <!-- Home Screen (Create Room) -->
    <div id="homeScreen" class="screen active">
      <div class="logo">
        <h2>Rock Paper Scissors Event</h2>
        <p class="game-mode">First to 9 wins!</p>
      </div>
      
      <p class="discord-notice">Please enter a name we can use to identify you on Discord.</p>
      
      <div class="home-actions">
        <div class="input-group">
          <label for="hostUsername">Your Name</label>
          <input type="text" id="hostUsername" placeholder="Enter your name" maxlength="32">
        </div>
        <button id="createRoomBtn" class="btn btn-primary">Create Room</button>
      </div>
    </div>

    <!-- Join Screen (shown when ?room= in URL) -->
    <div id="joinScreen" class="screen">
      <div class="logo">
        <h2>Rock Paper Scissors Event</h2>
        <p>You've been invited!</p>
        <p class="game-mode">First to 9 wins!</p>
      </div>
      
      <p class="discord-notice">Please enter a name we can use to identify you on Discord.</p>
      
      <div class="home-actions">
        <div class="input-group">
          <label for="joinUsername">Your Name</label>
          <input type="text" id="joinUsername" placeholder="Enter your name" maxlength="32">
        </div>
        <button id="joinRoomBtn" class="btn btn-primary">Join Game</button>
      </div>
    </div>

    <!-- Lobby Screen -->
    <div id="lobbyScreen" class="screen">
      <div class="lobby-header">
        <h2>Game Lobby</h2>
        <div id="roomCodeSection" class="room-info host-only" style="display: none;">
          <span>Room Code: </span>
          <span id="roomCode" class="room-code"></span>
          <button id="copyLinkBtn" class="btn btn-small">Copy Link</button>
          <button id="copyCodeBtn" class="btn btn-small">Copy Code</button>
        </div>
        <div id="changeRoomSection" class="change-room-section host-only" style="display: none;">
          <button id="changeRoomCodeBtn" class="btn btn-small btn-warning">Change Room Code & Link</button>
        </div>
      </div>
      <div class="players-section">
        <h3>Players <span id="playerCount">(0)</span></h3>
        <ul id="playerList" class="player-list"></ul>
      </div>

      <div class="lobby-actions">
        <button id="startGameBtn" class="btn btn-primary host-only" style="display: none;">Start Game</button>
        <p id="waitingMessage" class="waiting-message">Waiting for host to start...</p>
      </div>

      <div class="lobby-footer">
        <div class="music-controls">
          <button id="prevTrackBtn" class="btn btn-small music-nav">‚èÆÔ∏è</button>
          <span id="trackName" class="track-name">Lobby</span>
          <button id="nextTrackBtn" class="btn btn-small music-nav">‚è≠Ô∏è</button>
          <button id="muteBtn" class="btn btn-small">üîä</button>
        </div>
        <button id="leaveRoomBtn" class="btn btn-danger btn-small">Leave Room</button>
      </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
      <div class="game-header">
        <h2>Round <span id="roundNumber">1</span></h2>
        <div id="opponentInfo" class="opponent-info"></div>
        <div class="timer-container">
          <span class="timer-label">Time Left:</span>
          <span id="timerDisplay" class="timer-display">5</span>
        </div>
      </div>

      <button id="cancelGameBtn" class="btn btn-danger cancel-game-btn host-only" style="display: none;">Cancel Game</button>

      <div class="choice-section">
        <h3>Make Your Choice!</h3>
        <div class="choices">
          <button class="choice-btn" data-choice="rock">
            <span class="choice-emoji">‚úä</span>
            <span class="choice-label">Rock</span>
          </button>
          <button class="choice-btn" data-choice="paper">
            <span class="choice-emoji">‚úã</span>
            <span class="choice-label">Paper</span>
          </button>
          <button class="choice-btn" data-choice="scissors">
            <span class="choice-emoji">‚úåÔ∏è</span>
            <span class="choice-label">Scissors</span>
          </button>
        </div>
        <p id="choiceStatus" class="choice-status"></p>
      </div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen" class="screen">
      <div class="results-header">
        <h2>Round <span id="resultsRound">1</span> Results</h2>
        <div id="roundResult" class="round-result"></div>
      </div>

      <div class="results-table-container">
        <h3>Leaderboard</h3>
        <table class="results-table">
          <thead>
            <tr>
              <th>#</th>
              <th>Player</th>
              <th>Wins</th>
            </tr>
          </thead>
          <tbody id="resultsBody"></tbody>
        </table>
      </div>

      <div id="nextRoundCountdown" class="next-round-countdown"></div>

      <div class="results-actions">
        <button id="backToLobbyBtn" class="btn btn-secondary host-only" style="display: none;">Back to Lobby</button>
        <button id="cancelGameResultsBtn" class="btn btn-danger cancel-game-btn host-only" style="display: none;">Cancel Game</button>
      </div>
    </div>

    <!-- Watermark -->
    <div class="watermark">created by <strong>zorojuur</strong></div>

    <!-- Toast Notifications -->
    <div id="toastContainer" class="toast-container"></div>
  </div>

  <!-- Chat Toggle Button (floating) -->
  <button id="chatToggleFloat" class="chat-toggle-float" style="display: none;">
    <span class="chat-toggle-icon">üí¨</span>
    <span id="chatUnreadBadge" class="chat-unread-badge" style="display: none;">0</span>
  </button>

  <!-- Global Chat Sidebar -->
  <div id="chatSidebar" class="chat-section" style="display: none;">
    <div class="chat-header">
      <h3>Chat <span id="chatLockIndicator" class="chat-lock-indicator" style="display: none;">Locked</span></h3>
      <div class="chat-header-btns">
        <button id="lockChatBtn" class="btn btn-small btn-warning host-only" style="display: none;">Lock</button>
        <button id="closeChatBtn" class="btn btn-small">‚úï</button>
      </div>
    </div>
    <div id="chatContainer" class="chat-container">
      <div id="chatMessages" class="chat-messages"></div>
      <div class="chat-input-container">
        <input type="text" id="chatInput" placeholder="Type a message..." maxlength="200">
        <button id="sendChatBtn" class="btn btn-primary btn-small">Send</button>
      </div>
    </div>
  </div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js"></script>
</body>
</html>
